<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Runner R-Performance Tracker | Profesyonel Trading Takip Sistemi</title>
    <meta name="description"
        content="Runner stratejisi ile trading performansÄ±nÄ±zÄ± takip edin. Risk/Ã–dÃ¼l oranÄ±, hesap bÃ¼yÃ¼me hedefi ve akÄ±llÄ± geri bildirimlerle profesyonel trading yÃ¶netimi.">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.5.0/lz-string.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">R</div>
                    <div class="logo-text">
                        <h1>Runner Tracker</h1>
                        <p>Performance Analytics</p>
                    </div>
                </div>
                <div class="header-actions" id="headerActions">
                    <button class="theme-btn" id="themeBtn" title="TemayÄ± DeÄŸiÅŸtir">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                    </button>
                    <button class="settings-btn" id="shareBtn" style="margin-right: 8px;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                            <polyline points="16 6 12 2 8 6"></polyline>
                            <line x1="12" y1="2" x2="12" y2="15"></line>
                        </svg>
                        PaylaÅŸ
                    </button>
                    <div class="profile-switcher">
                        <button class="settings-btn" id="currentProfileTitle" style="gap: 8px;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            <span id="activeProfileName">Ana Hesap</span>
                        </button>
                        <div class="profile-dropdown" id="profileDropdown">
                            <div class="profile-list" id="profileList">
                                <!-- Profiller buraya gelecek -->
                            </div>
                            <button id="addProfileBtn" class="add-profile-btn">+ Yeni PortfÃ¶y Ekle</button>
                        </div>
                    </div>

                    <button class="settings-btn" id="settingsBtn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path
                                d="M12 1v6m0 6v6m0-18a9 9 0 0 1 9 9m-9-9a9 9 0 0 0-9 9m9 9a9 9 0 0 1-9-9m9 9a9 9 0 0 0 9-9">
                            </path>
                        </svg>
                        Ayarlar
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Read Only Banner -->
    <div id="readOnlyBanner" class="read-only-banner">
        <div style="display: flex; flex-direction: column; gap: 8px; flex: 1;">
            <span style="font-weight: 600; font-size: 1rem;" data-i18n="snapshot_title">ğŸ“¸ Bu Link AnlÄ±k GÃ¶rÃ¼ntÃ¼
                Ä°Ã§erir</span>
            <span style="font-size: 0.9rem; opacity: 0.9;" data-i18n="snapshot_desc">Bu link paylaÅŸÄ±ldÄ±ÄŸÄ± andaki
                trade'leri gÃ¶sterir. Daha sonra eklenen veya silinen trade'leri gÃ¶rmek iÃ§in hesap sahibinden gÃ¼ncel
                linki isteyiniz.</span>
        </div>
        <a href="index.html"
            style="white-space: nowrap; padding: 8px 16px; background: rgba(255,255,255,0.2); border-radius: 6px; text-decoration: none; font-weight: 500;"
            data-i18n="start_your_own">Kendi Takibini BaÅŸlat</a>
    </div>

    <!-- Main Container -->
    <main class="main-container">
        <div class="container">

            <!-- Target Status Section -->
            <section class="target-section">
                <div class="section-header">
                    <h2 data-i18n="account_mode">ğŸ¯ HEDEF DURUMU</h2>
                    <div class="target-badge" id="targetBadge" data-i18n="active">Aktif</div>
                </div>

                <div class="target-grid">
                    <div class="target-card primary">
                        <div class="card-label" id="cardLabel1" data-i18n="targeted_profit">Hedeflenen KÃ¢r</div>
                        <div class="card-value" id="targetProfit">4,000 â‚º</div>
                        <div class="card-sublabel" id="cardSub1" data-i18n="target_growth_percentage_full">%8 BÃ¼yÃ¼me
                            Hedefi</div>
                    </div>

                    <div class="target-card success">
                        <div class="card-label" data-i18n="net_profit_loss">GÃ¼ncel Net KÃ¢r</div>
                        <div class="card-value" id="currentProfit">0 â‚º</div>
                        <div class="card-sublabel" id="profitChange" data-i18n="starting">BaÅŸlangÄ±Ã§</div>
                    </div>

                    <div class="target-card warning">
                        <div class="card-label" id="cardLabel3" data-i18n="remaining_to_target">Hedefe Kalan</div>
                        <div class="card-value" id="remainingProfit">4,000 â‚º</div>
                        <div class="card-sublabel" id="remainingTrades" data-i18n="no_trades_yet">~0 iÅŸlem gerekli</div>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="progress-container">
                    <div class="progress-header">
                        <span id="progressLabel">Tamamlanma OranÄ±</span>
                        <span class="progress-percentage" id="progressPercentage">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                        <div class="progress-glow" id="progressGlow" style="width: 0%"></div>
                    </div>
                </div>
            </section>

            <!-- Chart Section -->
            <section class="chart-section">
                <div class="section-header">
                    <h2>ğŸ“Š BAKÄ°YE Ä°LERLEYÄ°ÅÄ°</h2>
                </div>
                <div class="chart-container">
                    <canvas id="balanceChart"></canvas>
                </div>
            </section>

            <!-- Trade Calendar Section -->
            <section class="trade-calendar-section" id="tradeCalendarSection">
                <div class="calendar-header-clickable" id="toggleCalendar">
                    <div class="section-title-wrapper" style="display: flex; align-items: center; gap: 10px;">
                        <h2 data-i18n="pnl_calendar" style="margin:0; font-size: 1rem;">ğŸ“… KÃ‚R/ZARAR TAKVÄ°MÄ°</h2>
                        <div class="calendar-nav" onclick="event.stopPropagation()">
                            <button id="prevMonth" class="nav-btn">â—€</button>
                            <span id="currentMonthYear">--</span>
                            <button id="nextMonth" class="nav-btn">â–¶</button>
                        </div>
                    </div>
                    <div class="calendar-toggle-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="18 15 12 9 6 15"></polyline>
                        </svg>
                    </div>
                </div>
                <div class="calendar-layout-container">
                    <div class="calendar-wrapper" id="pnlCalendar">
                        <!-- Calendar content will be injected via JS -->
                    </div>
                    <div class="stats-sidebar" id="pairStatsSidebar">
                        <div id="pairStatsContainer">
                            <!-- Stats content will be injected via JS -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Performance Metrics -->
            <section class="metrics-section">
                <div class="section-header">
                    <h2>ğŸ“ˆ PERFORMANS ANALÄ°ZÄ°</h2>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-icon balance">ğŸ’°</div>
                        <div class="metric-content">
                            <div class="metric-label">GÃ¼ncel Bakiye</div>
                            <div class="metric-value" id="currentBalance">50,000 â‚º</div>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-icon winrate">ğŸ¯</div>
                        <div class="metric-content">
                            <div class="metric-label">Kazanma OranÄ±</div>
                            <div class="metric-value" id="winRate">0%</div>
                            <div class="metric-detail" id="winRateDetail">0/0 iÅŸlem</div>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-icon rrr">ğŸ“Š</div>
                        <div class="metric-content">
                            <div class="metric-label">Ortalama Runner RRR</div>
                            <div class="metric-value" id="avgRRR">0.00R</div>
                            <div class="metric-detail" id="rrrDetail">Kazanan iÅŸlemler</div>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-icon profit">ğŸ’µ</div>
                        <div class="metric-content">
                            <div class="metric-label">Net Kar/KayÄ±p</div>
                            <div class="metric-value" id="netProfitLoss">0 â‚º</div>
                            <div class="metric-detail" id="profitDetail">Toplam iÅŸlem sonucu</div>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-icon drawdown">ğŸ“‰</div>
                        <div class="metric-content">
                            <div class="metric-label">Max Drawdown</div>
                            <div class="metric-value" id="maxDrawdown">0%</div>
                            <div class="metric-detail" id="drawdownDetail">Zirveden dÃ¼ÅŸÃ¼ÅŸ</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Smart Feedback -->
            <section class="feedback-section" id="feedbackSection" style="display: none;">
                <div class="feedback-card" id="feedbackCard">
                    <div class="feedback-icon" id="feedbackIcon">ğŸ’¡</div>
                    <div class="feedback-content">
                        <div class="feedback-title" id="feedbackTitle">AkÄ±llÄ± Geri Bildirim</div>
                        <div class="feedback-message" id="feedbackMessage"></div>
                    </div>
                </div>
            </section>



            <!-- Trade Entry Form -->
            <section class="entry-section">
                <div class="section-header">
                    <h2>â• YENÄ° Ä°ÅLEM KAYDI</h2>
                    <button class="calculator-btn" id="openCalcBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect>
                            <line x1="8" y1="6" x2="16" y2="6"></line>
                            <line x1="16" y1="14" x2="16" y2="14"></line>
                            <line x1="8" y1="14" x2="8" y2="14"></line>
                            <line x1="12" y1="14" x2="12" y2="14"></line>
                            <line x1="8" y1="18" x2="8" y2="18"></line>
                            <line x1="12" y1="18" x2="12" y2="18"></line>
                            <line x1="16" y1="18" x2="16" y2="18"></line>
                        </svg><span data-i18n="calculator"></span>
                    </button>
                </div>

                <form class="trade-form" id="tradeForm">
                    <div class="form-grid">
                        <!-- Pair and Direction -->
                        <div class="form-group">
                            <label for="tradePair" data-i18n="pair">Parite</label>
                            <input type="text" id="tradePair" placeholder="Ã–rn: USDJPY"
                                style="text-transform: uppercase;" required>
                        </div>
                        <div class="form-group">
                            <label for="tradeDirection" data-i18n="direction">YÃ¶n</label>
                            <select id="tradeDirection" required>
                                <option value="" data-i18n="select_option">SeÃ§iniz...</option>
                                <option value="long" data-i18n="long_option">Long (AlÄ±ÅŸ) ğŸ”¼</option>
                                <option value="short" data-i18n="short_option">Short (SatÄ±ÅŸ) ğŸ”»</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label for="chartUrl">TradingView Link (Opsiyonel)</label>
                        <input type="url" id="chartUrl" placeholder="https://www.tradingview.com/x/..."
                            style="width: 100%;">
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="tradeResult">Ä°ÅŸlem Sonucu</label>
                            <select id="tradeResult" required>
                                <option value="">SeÃ§iniz...</option>
                                <option value="loss">âŒ KayÄ±p (SL)</option>
                                <option value="be">âš–ï¸ BaÅŸa BaÅŸ (BE)</option>
                                <option value="win">âœ… KazanÃ§ (Win)</option>
                            </select>
                        </div>

                        <!-- Manual Loss Input -->
                        <div class="form-group" id="manualLossGroup" style="display: none;">
                            <label for="manualLossAmount">KayÄ±p MiktarÄ± (TL)</label>
                            <input type="number" id="manualLossAmount" placeholder="Ã–rn: -500" step="0.01">
                            <small>Toplam zarar miktarÄ±nÄ± negatif olarak girin</small>
                        </div>

                        <!-- Multi TP Toggle -->
                        <div class="form-group" id="multiTPToggleGroup" style="display: none;">
                            <label for="multiTPToggle">Ã‡oklu Kar AlÄ±mÄ±?</label>
                            <select id="multiTPToggle">
                                <option value="no">HayÄ±r (Standart)</option>
                                <option value="yes">Evet (GeliÅŸmiÅŸ)</option>
                            </select>
                        </div>

                        <!-- Multi TP Container -->
                        <div class="multi-tp-container" id="multiTPContainer" style="display: none;">
                            <div class="form-header-row">
                                <label>Kar AlÄ±m Seviyeleri</label>
                                <button type="button" class="add-tp-btn" id="addTPRowBtn">+ Yeni Seviye
                                    Ekle</button>
                            </div>
                            <div id="tpRows">
                                <!-- Dynamic Rows Will Be Added Here -->
                            </div>
                            <small style="margin-top: 8px; display: block;">Toplam YÃ¼zde: <span
                                    id="totalTPPercent">0</span>%</small>
                        </div>

                        <!-- Win Trade Details -->
                        <div class="form-group" id="firstCloseRRRGroup" style="display: none;">
                            <label for="firstCloseRRR">Ä°lk KapanÄ±ÅŸ RRR Seviyesi</label>
                            <input type="number" id="firstCloseRRR" step="0.1" min="0" placeholder="Ã–rn: 1.2">
                            <small>Ä°lk kÄ±smÄ± hangi R seviyesinde kapattÄ±nÄ±z?</small>
                        </div>

                        <div class="form-group" id="firstClosePercentGroup" style="display: none;">
                            <label for="firstClosePercent">Ä°lk KapanÄ±ÅŸ YÃ¼zdesi (%)</label>
                            <input type="number" id="firstClosePercent" step="5" min="0" max="100"
                                placeholder="Ã–rn: 70">
                            <small>Pozisyonun yÃ¼zde kaÃ§Ä±nÄ± kapattÄ±nÄ±z?</small>
                        </div>

                        <div class="form-group" id="runnerCloseRRRGroup" style="display: none;">
                            <label for="runnerCloseRRR">Kalan KÄ±smÄ±n KapandÄ±ÄŸÄ± RRR</label>
                            <input type="number" id="runnerCloseRRR" step="0.1" min="0" placeholder="Ã–rn: 3.5">
                            <small>Runner kÄ±smÄ± hangi R seviyesinde kapandÄ±?</small>
                        </div>

                        <!-- BE Trade Details -->
                        <div class="form-group" id="beCloseRRRGroup" style="display: none;">
                            <label for="beCloseRRR">Ä°lk KapanÄ±ÅŸ RRR Seviyesi</label>
                            <input type="number" id="beCloseRRR" step="0.1" min="0" placeholder="Ã–rn: 1.2">
                            <small>KÃ¢r kilitleme yaptÄ±ÄŸÄ±nÄ±z R seviyesi</small>
                        </div>

                        <div class="form-group" id="beClosePercentGroup" style="display: none;">
                            <label for="beClosePercent">Ä°lk KapanÄ±ÅŸ YÃ¼zdesi (%)</label>
                            <input type="number" id="beClosePercent" step="5" min="0" max="100" placeholder="Ã–rn: 70">
                            <small>KÃ¢r kilitlediÄŸiniz pozisyon yÃ¼zdesi</small>
                        </div>

                        <div class="form-group full-width" id="notesGroup">
                            <label for="tradeNotes">Ä°ÅŸlem NotlarÄ± (Opsiyonel)</label>
                            <textarea id="tradeNotes" rows="2"
                                placeholder="KapanÄ±ÅŸ daÄŸÄ±lÄ±mÄ± veya diÄŸer notlar..."></textarea>
                        </div>
                    </div>

                    <button type="submit" class="submit-btn" id="submitTradeBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M12 5v14m-7-7h14"></path>
                        </svg>
                        <span>Ä°ÅŸlemi Kaydet</span>
                    </button>
                </form>
            </section>

            <!-- Trade History -->
            <section class="history-section">
                <div class="section-header">
                    <h2>ğŸ“œ Ä°ÅLEM GEÃ‡MÄ°ÅÄ°</h2>
                    <button class="clear-btn" id="clearHistoryBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path
                                d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                            </path>
                        </svg>
                        GeÃ§miÅŸi Temizle
                    </button>
                </div>

                <div class="history-container" id="historyContainer">
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ“Š</div>
                        <p>HenÃ¼z iÅŸlem kaydÄ± yok</p>
                        <small>YukarÄ±daki formdan ilk iÅŸleminizi ekleyin</small>
                    </div>
                </div>

                <!-- Pagination -->
                <div class="pagination-container" id="paginationContainer" style="display: none;">
                    <button class="pagination-btn" id="prevPageBtn" disabled>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M15 18l-6-6 6-6"></path>
                        </svg>
                        Ã–nceki
                    </button>
                    <span class="pagination-info" id="paginationInfo">Sayfa 1 / 1</span>
                    <button class="pagination-btn" id="nextPageBtn" disabled>
                        Sonraki
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M9 18l6-6-6-6"></path>
                        </svg>
                    </button>
                </div>
            </section>

        </div>
    </main>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-overlay" id="modalOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="settings_modal_title">âš™ï¸ Sistem AyarlarÄ±</h3>
                <button class="modal-close" id="modalClose">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <div class="modal-body">
                <form id="settingsForm">
                    <!-- Section 1: Account Mode -->
                    <div class="settings-section">
                        <div class="settings-section-title" data-i18n="account_mode_title">âš–ï¸ Hesap Modu SeÃ§imi</div>
                        <div class="form-group">
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" name="accountMode" value="challenge" checked
                                        onchange="toggleTargetInput()">
                                    <span data-i18n="mode_challenge">ğŸ¯ Challenge (Hedefli)</span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="accountMode" value="free" onchange="toggleTargetInput()">
                                    <span data-i18n="mode_free">ğŸ“ˆ Serbest (Bakiye)</span>
                                </label>
                            </div>
                            <small id="modeDescription" data-i18n="mode_desc_challenge">Challenge modunda belirli bir
                                kÃ¢r hedefine ulaÅŸmaya
                                Ã§alÄ±ÅŸÄ±rsÄ±nÄ±z.</small>
                        </div>
                    </div>

                    <!-- Section 2: Capital & Target -->
                    <div class="settings-section">
                        <div class="settings-section-title" data-i18n="capital_settings_title">ğŸ’° Sermaye ve Hedef
                            AyarlarÄ±</div>
                        <div class="form-group">
                            <label for="archiveName" data-i18n="archive_name_label">GÃ¼nlÃ¼k / ArÅŸiv Ä°smi</label>
                            <input type="text" id="archiveName" value="RUNNER TRADER JOURNAL" maxlength="50" required>
                            <small data-i18n="archive_name_help">Rapor baÅŸlÄ±klarÄ±nda ve dosya isminde kullanÄ±lacak
                                isim.</small>
                        </div>
                        <div class="form-group">
                            <label for="initialCapital" data-i18n="initial_capital_label">BaÅŸlangÄ±Ã§ Sermayesi
                                (â‚º)</label>
                            <input type="number" id="initialCapital" value="50000" min="0" step="0.01" required>
                            <small data-i18n="initial_capital_help">HesabÄ±nÄ±zÄ±n ÅŸu anki mevcut bakiyesi</small>
                        </div>

                        <div class="form-group" id="targetBaseGroup">
                            <label for="targetBaseCapital" data-i18n="target_base_label">Hedef Baz Sermayesi (â‚º)</label>
                            <input type="number" id="targetBaseCapital" value="50000" min="0" step="0.01" required>
                            <small data-i18n="target_base_help">Hedefin hesaplandÄ±ÄŸÄ± ana para (KÃ¢r bu tutar Ã¼zerinden
                                hesaplanÄ±r)</small>
                        </div>

                        <div class="form-group" id="targetGrowthGroup">
                            <label for="targetGrowth" data-i18n="target_growth_label">Hedef BÃ¼yÃ¼me OranÄ± (%)</label>
                            <input type="number" id="targetGrowth" value="8" min="1" max="1000" step="0.5" required>
                            <small data-i18n="target_growth_help">Challenge modunda ulaÅŸmak istediÄŸiniz toplam kÃ¢r
                                yÃ¼zdesi</small>
                        </div>
                    </div>

                    <!-- Section 3: Risk Management -->
                    <div class="settings-section" id="riskManagementSection">
                        <div class="settings-section-title" data-i18n="risk_settings_title">ğŸ›¡ï¸ Risk ve Strateji
                            YÃ¶netimi</div>
                        <div class="form-group" id="riskGroup">
                            <label for="riskPerTrade" data-i18n="risk_per_trade_label">Ä°ÅŸlem BaÅŸÄ±na Maksimum Risk
                                (%)</label>
                            <input type="number" id="riskPerTrade" value="0.5" min="0.1" max="5" step="0.1" required>
                            <small data-i18n="risk_per_trade_help">Her iÅŸlemde kasanÄ±zÄ±n yÃ¼zde kaÃ§Ä±nÄ± riske
                                atacaksÄ±nÄ±z?</small>
                        </div>

                        <div class="form-group" id="rGroup">
                            <label for="rLevel" data-i18n="r_level_label">KÃ¢r Kilitleme R Seviyesi</label>
                            <input type="number" id="rLevel" value="1.2" min="0.5" max="5" step="0.1" required>
                            <small data-i18n="r_level_help">Ä°ÅŸlem bu R seviyesine ulaÅŸtÄ±ÄŸÄ±nda kÃ¢rÄ±n bir kÄ±smÄ±
                                kilitlenir.</small>
                        </div>

                        <div class="form-group" id="lockGroup">
                            <label for="lockPercentage" data-i18n="lock_percent_label">Kilitlenen Pozisyon YÃ¼zdesi
                                (%)</label>
                            <input type="number" id="lockPercentage" value="70" min="50" max="90" step="5" required>
                            <small data-i18n="lock_percent_help">KÃ¢r kilitlendiÄŸinde pozisyonun yÃ¼zde kaÃ§Ä±
                                kapatÄ±lacak?</small>
                        </div>
                    </div>

                    <!-- Section 4: Manual Mode & Language -->
                    <div class="settings-section">
                        <div class="settings-section-title" data-i18n="extra_settings_title">âš™ï¸ Ek Ã–zellikler / Language
                        </div>
                        <div class="form-group" id="manualModeGroup">
                            <label class="checkbox-label">
                                <input type="checkbox" id="manualMode">
                                <span data-i18n="manual_mode_label">Manuel GiriÅŸ Modu</span>
                            </label>
                            <small data-i18n="manual_mode_help">KazanÃ§ miktarlarÄ±nÄ± Runner sisteminin otomatik
                                hesaplamasÄ± yerine manuel girmek iÃ§in
                                kullanÄ±n.</small>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                            <div class="form-group">
                                <label for="appLanguage" data-i18n="language_label">Dil / Language</label>
                                <select id="appLanguage">
                                    <option value="tr">TÃ¼rkÃ§e ğŸ‡¹ğŸ‡·</option>
                                    <option value="en">English ğŸ‡ºğŸ‡¸</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="appCurrency" data-i18n="currency_label">Para Birimi / Currency</label>
                                <select id="appCurrency">
                                    <option value="TRY">TÃ¼rk LirasÄ± (â‚º)</option>
                                    <option value="USD">US Dollar ($)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Section 5: Account Closure -->
                    <div class="settings-section">
                        <div class="settings-section-title" data-i18n="close_account_title">ğŸ“‚ HesabÄ± Kapat ve ArÅŸivle
                        </div>
                        <p data-i18n="close_account_desc"
                            style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 12px; line-height: 1.4;">
                            Mevcut challenge veya serbest dÃ¶nemi sonlandÄ±rÄ±n. TÃ¼m iÅŸlem geÃ§miÅŸiniz profesyonel formatta
                            <b>PDF ve Excel</b> olarak dÄ±ÅŸa aktarÄ±lÄ±r, ardÄ±ndan hesabÄ±nÄ±z yeni bir dÃ¶nem iÃ§in
                            sÄ±fÄ±rlanÄ±r.
                        </p>
                        <button type="button" class="btn-primary" id="closeAccountBtn"
                            style="background: linear-gradient(135deg, #f85149, #b91c1c); border: none; width: 100%; padding: 12px; font-weight: bold; border-radius: 8px;">
                            <span data-i18n="close_account_btn">ğŸ† HesabÄ± Kapat ve Verileri Ä°ndir</span>
                        </button>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="resetSettings" data-i18n="reset">VarsayÄ±lana
                            DÃ¶n</button>
                        <button type="button" class="btn-danger" id="clearAllData" data-i18n="reset_all_data">TÃ¼m
                            Verileri SÄ±fÄ±rla</button>
                        <button type="submit" class="btn-primary" data-i18n="save">Kaydet</button>
                    </div>
                </form>
            </div>
        </div>
    </div> <!-- Close settingsModal correctly -->

    <!-- Calculator Modal -->
    <div class="modal" id="calcModal">
        <div class="modal-overlay" id="calcModalOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="calc_modal_title">ğŸ§® KÃ¢r HesaplayÄ±cÄ±</h3>
                <button class="modal-close" id="calcModalClose">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <div class="settings-form">
                <div class="form-group">
                    <label for="calcRiskAmount" data-i18n="calc_risk_label">Risk MiktarÄ± (TL)</label>
                    <input type="number" id="calcRiskAmount" placeholder="Ã–rn: 250">
                    <small data-i18n="calc_risk_help">Ä°ÅŸlem baÅŸÄ±na riske edilen tutar</small>
                </div>

                <div class="form-group">
                    <label for="calcRRR" data-i18n="calc_rrr_label">Hedef RRR</label>
                    <input type="number" id="calcRRR" placeholder="Ã–rn: 2.5" step="0.1">
                    <small data-i18n="calc_rrr_help">KÃ¢r almayÄ± planladÄ±ÄŸÄ±nÄ±z R seviyesi</small>
                </div>

                <div class="form-group">
                    <label for="calcPercent" data-i18n="calc_percent_label">KapanÄ±ÅŸ YÃ¼zdesi (%)</label>
                    <input type="number" id="calcPercent" placeholder="Ã–rn: 90" max="100">
                    <small data-i18n="calc_percent_help">Bu seviyede kapatÄ±lacak pozisyon oranÄ±</small>
                </div>

                <div class="form-group">
                    <label for="calcLotSize" data-i18n="calc_lot_label">Mevcut Lot MiktarÄ±</label>
                    <input type="number" id="calcLotSize" placeholder="Ã–rn: 0.5" step="0.01">
                    <small data-i18n="calc_lot_help">Elinizdeki toplam lot miktarÄ±</small>
                </div>

                <div class="calc-result-box">
                    <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 4px;"
                        data-i18n="calc_estimate_label">Tahmini KÃ¢r
                    </div>
                    <div class="calc-result-value" id="calcResult">0 â‚º</div>
                </div>

                <div class="calc-result-box" id="lotResultBox"
                    style="display: none; margin-top: 12px; background: rgba(59, 130, 246, 0.1); border-color: var(--accent-primary);">
                    <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 4px;"
                        data-i18n="calc_mt5_label">MT5 Mobil Ä°Ã§in
                    </div>
                    <div class="calc-result-value" id="lotResult" style="color: var(--accent-primary);">0.00 lot
                    </div>
                    <small style="margin-top: 8px; display: block; color: var(--text-secondary);"
                        data-i18n="calc_mt5_help">Bu RR seviyesinde
                        kapatÄ±lacak lot miktarÄ±</small>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-primary" id="calculateBtn" style="width: 100%"
                        data-i18n="calculate">Hesapla</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div class="modal" id="shareModal">
        <div class="modal-overlay" id="shareModalOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="shareModalTitle">ğŸ† Challenge TamamlandÄ±!</h3>
                <button class="modal-close" id="shareModalClose">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <div class="modal-body" style="text-align: center; padding-top: 1rem;">
                <div id="shareModalIcon" style="font-size: 3rem; margin-bottom: 1rem;">ğŸ‰</div>
                <h4 id="shareModalHeading" style="margin-bottom: 0.5rem; color: var(--text-primary);">Tebrikler!
                    Hedefinize UlaÅŸtÄ±nÄ±z.</h4>
                <p id="shareModalMessage" style="color: var(--text-secondary); margin-bottom: 1.5rem;">BaÅŸarÄ±nÄ±zÄ±
                    arkadaÅŸlarÄ±nÄ±zla paylaÅŸmak
                    iÃ§in aÅŸaÄŸÄ±daki linki kullanabilirsiniz.</p>

                <div class="form-group">
                    <label>PaylaÅŸÄ±labilir Link</label>
                    <div style="display: flex; gap: 8px;">
                        <input type="text" id="shareLinkInput" readonly
                            style="text-align: center; font-family: monospace; font-size: 0.9rem;">
                        <button type="button" class="btn-primary" id="copyLinkBtn"
                            style="min-width: 80px;">Kopyala</button>
                    </div>
                </div>

                <div id="newChallengeSection"
                    style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color); display: none;">
                    <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 1rem;">
                        Bu challenge tamamlandÄ±! Mevcut bakiyenle yeni bir hedefe yelken aÃ§mak ister misin?
                    </p>
                    <button type="button" class="submit-btn" id="startNewChallengeBtn"
                        style="background-color: var(--accent-primary);">
                        ğŸš€ Yeni Challenge BaÅŸlat (Bakiyeyi Devret)
                    </button>
                    <small style="display: block; margin-top: 8px; color: var(--text-secondary);">
                        *Mevcut bakiye baÅŸlangÄ±Ã§ sermayesi yapÄ±lÄ±r, iÅŸlemler temizlenir ve yeni hedef belirlenir.
                    </small>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>